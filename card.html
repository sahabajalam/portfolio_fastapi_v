<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medium-Style Blog Card</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #FAFBFD;
            --card: #fff;
            --muted: #6b7280;
            --accent: linear-gradient(90deg, #7c3aed 0%, #06b6d4 100%);
            --radius: 14px;
            --maxw: 720px;
            --glass: rgba(255, 255, 255, 0.6);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0
        }

        html,
        body {
            height: 100%
        }

        body {
            font-family: 'Sora', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
            background: var(--bg);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 28px;
            gap: 16px;
            -webkit-font-smoothing: antialiased;
            text-rendering: optimizeLegibility;
        }

        /* Card wrapper */
        .card-wrap {
            width: 100%;
            max-width: var(--maxw)
        }

        .card {
            display: block;
            background: var(--card);
            border-radius: var(--radius);
            box-shadow: 0 8px 30px rgba(16, 24, 40, 0.08);
            border: 1px solid rgba(15, 23, 42, 0.04);
            padding: 20px;
            text-decoration: none;
            color: inherit;
            transition: transform .22s ease, box-shadow .22s ease;
            overflow: hidden;
            position: relative;
            cursor: pointer;
        }

        .card:focus-within {
            outline: 3px solid rgba(99, 102, 241, 0.14);
            outline-offset: 4px
        }

        .card:hover {
            transform: translateY(-6px);
            box-shadow: 0 18px 45px rgba(16, 24, 40, 0.12)
        }

        .card-grid {
            display: grid;
            /* give more room to text by making the image column narrower */
            grid-template-columns: minmax(0, 1fr) 200px;
            gap: 18px;
            align-items: stretch;
        }

        .avatar {
            width: 64px;
            height: 64px;
            border-radius: 12px;
            flex: 0 0 64px;
            background: linear-gradient(180deg, #EEF2FF 0%, #F0F9FF 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: #111827;
            font-size: 18px;
            border: 1px solid rgba(15, 23, 42, 0.04)
        }

        .meta {
            display: flex;
            gap: 8px;
            align-items: center;
            font-size: 13px;
            color: var(--muted)
        }

        .meta time {
            font-weight: 600;
            color: var(--muted)
        }

        .read-time {
            margin-left: auto;
            background: linear-gradient(90deg, rgba(99, 102, 241, 0.08), rgba(6, 182, 212, 0.06));
            padding: 6px 10px;
            border-radius: 999px;
            font-weight: 600;
            color: #374151
        }

        h2.title {
            font-size: 20px;
            line-height: 1.25;
            margin: 6px 0 2px;
            color: #0f172a;
            font-weight: 800
        }

        /* clamp long titles to 2 lines with ellipsis
           - Uses -webkit-line-clamp where supported.
           - Provides a max-height fallback (2 * line-height) for non-WebKit browsers. */
        .title {
            /* base typographic sizing to compute max-height */
            line-height: 1.25;
            /* matches h2.title line-height above */

            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;

            /* fallback for browsers that don't support -webkit-line-clamp */
            /* 2 lines * computed line-height * font-size (20px) = max-height */
            max-height: calc(2 * 1.25em);
            /* two lines worth of height */
        }

        /* allow long titles and summaries to wrap within the available text column */
        .title,
        .title-link {
            overflow-wrap: break-word;
            word-break: break-word;
            hyphens: auto;
        }

        /* clamp summaries to 3 lines with ellipsis where supported */
        p.summary {
            color: #475569;
            line-height: 1.6;
            font-size: 15px;
            margin-top: 6px;

            display: -webkit-box;
            -webkit-line-clamp: 3;
            line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            max-height: calc(3 * 1.6em);
            /* 3 lines * summary line-height (1.6) */
        }

        .chips {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 10px
        }

        .chip {
            background: rgba(99, 102, 241, 0.08);
            color: #4338ca;
            padding: 6px 10px;
            border-radius: 999px;
            font-weight: 700;
            font-size: 12px
        }

        /* cover image on the right */
        .cover {
            width: 100%;
            height: 100%;
            border-radius: calc(var(--radius) - 6px);
            overflow: hidden;
            display: block;
            box-shadow: 0 6px 20px rgba(2, 6, 23, 0.06);
            position: relative;
        }

        .cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block
        }

        /* Title link (click title to open article) */
        .title-link {
            color: inherit;
            text-decoration: none;
            display: inline-block;
            padding: 2px 4px;
            border-radius: 6px
        }

        .title-link:hover {
            color: #4338ca;
            text-decoration: underline
        }

        .title-link:focus-visible {
            outline: 3px solid rgba(99, 102, 241, 0.16);
            outline-offset: 3px
        }

        /* subtle overlay over image on hover */
        .cover::after {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, rgba(0, 0, 0, 0.0), rgba(0, 0, 0, 0.12));
            opacity: 0;
            transition: opacity .22s ease;
            border-radius: calc(var(--radius) - 6px)
        }

        .cover:hover::after {
            opacity: 1
        }

        /* make the card show outline when focused (keyboard) */
        .card:focus {
            outline: 3px solid rgba(99, 102, 241, 0.14);
            outline-offset: 4px
        }

        /* Responsive: stack on smaller viewports */
        @media (max-width:760px) {
            .card-grid {
                grid-template-columns: 1fr
            }

            .cover {
                height: 180px;
                margin-top: 6px
            }
        }

        @media (max-width:560px) {
            h2.title {
                font-size: 18px
            }

            .card {
                padding: 16px
            }
        }

        /* Respect reduced motion */
        @media (prefers-reduced-motion:reduce) {

            .card,
            .card:hover {
                transition: none;
                transform: none
            }
        }
    </style>
</head>

<body>
    <div class="card-wrap">
        <article class="card" aria-labelledby="card-title-1">
            <div class="card-grid">
                <div>
                    <div class="meta">
                        <time datetime="2025-10-16">Oct 16, 2025</time>
                        <span class="read-time" aria-hidden="true">6 min</span>
                    </div>

                    <h2 id="card-title-1" class="title"><a class="title-link" href="#"
                            aria-label="Read 'The Future of Interstellar Travel: Beyond Light Speed.'">The
                            Future of
                            Interstellar Travel: Beyond Light Speed</a></h2>

                    <p class="summary">Exploring theoretical physics and engineering challenges that stand
                        between humanity and the stars. What will it take to cross the cosmic void?
                    </p>

                    <div class="chips" aria-hidden="true">
                        <span class="chip">science</span>
                        <span class="chip">space</span>
                    </div>
                </div>
                <!-- right-side cover image -->
                <div class="cover">
                    <img src="https://images.unsplash.com/photo-1446776811953-b23d57bd21aa?q=80&w=800&auto=format&fit=crop"
                        alt="Starry sky and spaceship silhouette" loading="lazy">
                </div>
            </div>
        </article>
    </div>

    <!-- Test card: intentionally long title to verify truncation/overflow behavior -->
    <div class="card-wrap">
        <article class="card" aria-labelledby="card-title-2">
            <div class="card-grid">
                <div>
                    <div class="meta">
                        <time datetime="2025-10-16">Oct 16, 2025</time>
                        <span class="read-time" aria-hidden="true">8 min</span>
                    </div>

                    <h2 id="card-title-2" class="title"><a class="title-link" href="#"
                            aria-label="Read 'A Very Very Long Title That Keeps Going On and On Without Pausing to Test How the Layout Handles Extremely Verbose Headlines and Whether The Line-Clamp And Word-Break Still Work Under Painful Conditions and Multiple Edge Cases Possibly Causing Unexpected Overflows or Layout Breakage'">A
                            Very Very Long Title That Keeps Going On and On Without Pausing to Test How the Layout
                            Handles Extremely Verbose Headlines and Whether The Line-Clamp And Word-Break Still Work
                            Under Painful Conditions and Multiple Edge Cases Possibly Causing Unexpected Overflows or
                            Layout Breakage</a></h2>

                    <p class="summary">This card is only for testing long-title rendering. The title above should be
                        clamped to two lines and show an ellipsis where supported.</p>

                    <div class="chips" aria-hidden="true">
                        <span class="chip">testing</span>
                        <span class="chip">layout</span>
                    </div>
                </div>
                <!-- right-side cover image -->
                <div class="cover">
                    <img src="https://images.unsplash.com/photo-1517694712202-14dd9538aa97?q=80&w=800&auto=format&fit=crop"
                        alt="Abstract testing image" loading="lazy">
                </div>
            </div>
        </article>
    </div>

    <script>
        // Make article.card behave like a link: navigate to the title link href on click or Enter/Space
        (function () {
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                // find the title link inside
                const titleLink = card.querySelector('.title-link');
                if (!titleLink) return;

                // make card focusable
                card.setAttribute('tabindex', '0');
                card.setAttribute('role', 'link');

                const goto = () => {
                    const href = titleLink.getAttribute('href');
                    if (href && href !== '#') window.location.href = href;
                };

                card.addEventListener('click', (e) => {
                    // if user clicked the titleLink itself, let the default happen
                    if (e.target.closest('.title-link')) return;
                    goto();
                });

                card.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        goto();
                    }
                });
            });
        })();

        // JS fallback: append an ellipsis if the element's content is visually truncated
        (function () {
            function needsTruncation(el) {
                // Check if content is taller than the visible area
                return el.scrollHeight > el.clientHeight + 2; // tolerance for rounding
            }

            function applyEllipsis(el) {
                // Store original text if not already stored
                if (!el.dataset.originalText) {
                    el.dataset.originalText = el.textContent.trim();
                }

                const original = el.dataset.originalText;
                if (!original) return;

                // Check if truncation is actually needed - if not, restore original and exit
                el.textContent = original;

                // Small delay to ensure layout is calculated
                requestAnimationFrame(() => {
                    if (!needsTruncation(el)) {
                        return; // No truncation needed, leave as-is
                    }

                    // Binary search to find the optimal truncation point
                    let low = 0, high = original.length;
                    let best = original.slice(0, Math.floor(original.length / 2)) + '…';

                    while (low <= high) {
                        const mid = Math.floor((low + high) / 2);
                        el.textContent = original.slice(0, mid).trim() + '…';

                        if (needsTruncation(el)) {
                            high = mid - 1;
                        } else {
                            best = el.textContent;
                            low = mid + 1;
                        }
                    }
                    el.textContent = best;
                });
            }

            function runFallback() {
                // target title links and summaries inside cards
                const titleEls = document.querySelectorAll('.title .title-link');
                const summaryEls = document.querySelectorAll('.summary');

                // ensure elements are measured after fonts and layout are ready
                const run = () => {
                    titleEls.forEach(a => {
                        applyEllipsis(a);
                    });
                    summaryEls.forEach(p => {
                        applyEllipsis(p);
                    });
                };

                if (document.fonts && document.fonts.ready) {
                    document.fonts.ready.then(() => {
                        // Additional delay to ensure all styles are applied
                        setTimeout(run, 100);
                    }).catch(() => {
                        setTimeout(run, 100);
                    });
                } else {
                    // fallback timeout
                    setTimeout(run, 300);
                }
            }

            // Run on DOMContentLoaded and on resize (debounced)
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', runFallback);
            } else {
                runFallback();
            }

            let rTO;
            window.addEventListener('resize', () => {
                clearTimeout(rTO);
                rTO = setTimeout(runFallback, 150);
            });
        })();
    </script>
</body>

</html>